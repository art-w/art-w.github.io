<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Typed_rpc (docs.findlib-1.grpc-eio.Grpc_eio.Server.Typed_rpc)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../../../../../';
let search_urls = ['../../../../../db.js','../../../../../sherlodoc.js'];
</script><script src="../../../../../odoc.support/odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../../index.html">docs</a> &#x00BB; <a href="../../../../index.html">findlib-1</a> &#x00BB; <a href="../../../index.html">grpc-eio</a> &#x00BB; <a href="../../index.html">Grpc_eio</a> &#x00BB; <a href="../index.html">Server</a> &#x00BB; Typed_rpc</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="ðŸ”Ž Search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Server.Typed_rpc</span></code></h1><p>This is an experimental API to build RPCs on the server side. Compared to</p><p>pc</p><p>, this interface will:</p><ul><li>handle the coding/decoding of messages for you under the hood;</li><li>use the service and RPC names provided by the rpc specification to register the services with their expected names.</li></ul></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type subst anchored" id="type-server"><a href="#type-server" class="anchor"></a><code><span><span class="keyword">type</span> server</span><span> := <a href="../index.html#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-unary"><a href="#type-unary" class="anchor"></a><code><span><span class="keyword">type</span> <span>('request, 'response) unary</span></span><span> = <span><span class="type-var">'request</span> <span class="arrow">&#45;&gt;</span></span> <a href="../../../../grpc/Grpc/Status/index.html#type-t">Grpc.Status.t</a> * <span><span class="type-var">'response</span> option</span></span></code></div><div class="spec-doc"><p><code>unary</code> is the type for a unary grpc rpc, one request, one response.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-client_streaming"><a href="#type-client_streaming" class="anchor"></a><code><span><span class="keyword">type</span> <span>('request, 'response) client_streaming</span></span><span> =
  <span><span><span class="type-var">'request</span> <a href="../../Seq/index.html#type-t">Seq.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../../../grpc/Grpc/Status/index.html#type-t">Grpc.Status.t</a> * <span><span class="type-var">'response</span> option</span></span></code></div><div class="spec-doc"><p><code>client_streaming</code> is the type for an rpc where the client streams the requests and the server responds once.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-server_streaming"><a href="#type-server_streaming" class="anchor"></a><code><span><span class="keyword">type</span> <span>('request, 'response) server_streaming</span></span><span> =
  <span><span class="type-var">'request</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'response</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../../../grpc/Grpc/Status/index.html#type-t">Grpc.Status.t</a></span></code></div><div class="spec-doc"><p><code>server_streaming</code> is the type for an rpc where the client sends one request and the server sends multiple responses.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-bidirectional_streaming"><a href="#type-bidirectional_streaming" class="anchor"></a><code><span><span class="keyword">type</span> <span>('request, 'response) bidirectional_streaming</span></span><span> =
  <span><span><span class="type-var">'request</span> <a href="../../Seq/index.html#type-t">Seq.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'response</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../../../grpc/Grpc/Status/index.html#type-t">Grpc.Status.t</a></span></code></div><div class="spec-doc"><p><code>bidirectional_streaming</code> is the type for an rpc where both the client and server can send multiple messages.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'service_spec t</span></span></code></div><div class="spec-doc"><p><code>t</code> represents an implementation for an RPC on the server side.</p></div></div><p>The next functions are meant to be used by the server to create RPC implementations. The rpc specification that the function implements must be provided as it is used to handle coding/decoding of messages. It also allows to refer to the service and RPC names specified in the <code>.proto</code> file.</p><div class="odoc-spec"><div class="spec value anchored" id="val-unary"><a href="#val-unary" class="anchor"></a><code><span><span class="keyword">val</span> unary : 
  <span><span><span>(<span class="type-var">'request</span>,
    <a href="../../../../grpc/Grpc/Rpc/Value_mode/index.html#type-unary">Grpc.Rpc.Value_mode.unary</a>,
    <span class="type-var">'response</span>,
    <a href="../../../../grpc/Grpc/Rpc/Value_mode/index.html#type-unary">Grpc.Rpc.Value_mode.unary</a>,
    <span class="type-var">'service_spec</span>)</span>
    <a href="../../../../grpc/Grpc/Rpc/Server_rpc/index.html#type-t">Grpc.Rpc.Server_rpc.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">f</span>:<span><span>(<span class="type-var">'request</span>, <span class="type-var">'response</span>)</span> <a href="#type-unary">unary</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'service_spec</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-client_streaming"><a href="#val-client_streaming" class="anchor"></a><code><span><span class="keyword">val</span> client_streaming : 
  <span><span><span>(<span class="type-var">'request</span>,
    <a href="../../../../grpc/Grpc/Rpc/Value_mode/index.html#type-stream">Grpc.Rpc.Value_mode.stream</a>,
    <span class="type-var">'response</span>,
    <a href="../../../../grpc/Grpc/Rpc/Value_mode/index.html#type-unary">Grpc.Rpc.Value_mode.unary</a>,
    <span class="type-var">'service_spec</span>)</span>
    <a href="../../../../grpc/Grpc/Rpc/Server_rpc/index.html#type-t">Grpc.Rpc.Server_rpc.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">f</span>:<span><span>(<span class="type-var">'request</span>, <span class="type-var">'response</span>)</span> <a href="#type-client_streaming">client_streaming</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'service_spec</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-server_streaming"><a href="#val-server_streaming" class="anchor"></a><code><span><span class="keyword">val</span> server_streaming : 
  <span><span><span>(<span class="type-var">'request</span>,
    <a href="../../../../grpc/Grpc/Rpc/Value_mode/index.html#type-unary">Grpc.Rpc.Value_mode.unary</a>,
    <span class="type-var">'response</span>,
    <a href="../../../../grpc/Grpc/Rpc/Value_mode/index.html#type-stream">Grpc.Rpc.Value_mode.stream</a>,
    <span class="type-var">'service_spec</span>)</span>
    <a href="../../../../grpc/Grpc/Rpc/Server_rpc/index.html#type-t">Grpc.Rpc.Server_rpc.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">f</span>:<span><span>(<span class="type-var">'request</span>, <span class="type-var">'response</span>)</span> <a href="#type-server_streaming">server_streaming</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'service_spec</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bidirectional_streaming"><a href="#val-bidirectional_streaming" class="anchor"></a><code><span><span class="keyword">val</span> bidirectional_streaming : 
  <span><span><span>(<span class="type-var">'request</span>,
    <a href="../../../../grpc/Grpc/Rpc/Value_mode/index.html#type-stream">Grpc.Rpc.Value_mode.stream</a>,
    <span class="type-var">'response</span>,
    <a href="../../../../grpc/Grpc/Rpc/Value_mode/index.html#type-stream">Grpc.Rpc.Value_mode.stream</a>,
    <span class="type-var">'service_spec</span>)</span>
    <a href="../../../../grpc/Grpc/Rpc/Server_rpc/index.html#type-t">Grpc.Rpc.Server_rpc.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">f</span>:<span><span>(<span class="type-var">'request</span>, <span class="type-var">'response</span>)</span> <a href="#type-bidirectional_streaming">bidirectional_streaming</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'service_spec</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-server"><a href="#val-server" class="anchor"></a><code><span><span class="keyword">val</span> server : <span><span><span>(<span><a href="../../../../grpc/Grpc/Rpc/Service_spec/index.html#type-t">Grpc.Rpc.Service_spec.t</a> <a href="#type-t">t</a></span>, <span>unit <a href="#type-t">t</a></span>)</span> <a href="../../../../grpc/Grpc/Rpc/Handlers/index.html#type-t">Grpc.Rpc.Handlers.t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-server">server</a></span></code></div><div class="spec-doc"><p>Having built a list of RPCs you will use this function to package them up into a server that is ready to be served over the network. This function takes care of registering the services based on the names provided by the protoc specification.</p></div></div></div></body></html>
